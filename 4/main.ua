Map ← ⊜∘≠@\n.&fras"input"

⌕@A Map
⍜(⊢|≡⋅0) ⍜⍉⍜(⊢|≡⋅0) ⍜(⊣|≡⋅0) ⍜⍉⍜(⊣|≡⋅0)
⊚
⊙[¯1_¯1 0_0 1_1]
,[1_¯1 0_0 ¯1_1]
∩⊞(⊡:Map+)
≡(/+[∩⊃(≍"MAS"|≍"SAM")])
/+=2
